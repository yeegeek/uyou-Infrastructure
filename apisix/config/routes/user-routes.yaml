# User Service 路由配置

routes:
  - name: user-register
    uri: /api/v1/users/register
    methods: [POST]
    upstream:
      type: roundrobin
      timeout:
        connect: 60
        send: 60
        read: 60
      nodes:
        "user-service:50051": 1
      scheme: grpc
    plugins:
      grpc-transcode:
        proto_id: "1"
        service: user.UserService
        method: Register
      cors:
        allow_origins: "*"
        allow_methods: "GET,POST,PUT,DELETE,OPTIONS"
        allow_headers: "*"

  - name: user-login
    uri: /api/v1/users/login
    methods: [POST]
    upstream:
      type: roundrobin
      timeout:
        connect: 60
        send: 60
        read: 60
      nodes:
        "user-service:50051": 1
      scheme: grpc
    plugins:
      grpc-transcode:
        proto_id: "1"
        service: user.UserService
        method: Login
      cors:
        allow_origins: "*"
        allow_methods: "GET,POST,PUT,DELETE,OPTIONS"
        allow_headers: "*"

  - name: user-getuser
    uri: /api/v1/users/*
    methods: [GET]
    upstream:
      type: roundrobin
      timeout:
        connect: 60
        send: 60
        read: 60
      nodes:
        "user-service:50051": 1
      scheme: grpc
    plugins:
      jwt-auth: {}
      grpc-transcode:
        proto_id: "1"
        service: user.UserService
        method: GetUser
      cors:
        allow_origins: "*"
        allow_methods: "GET,POST,PUT,DELETE,OPTIONS"
        allow_headers: "*"

  - name: user-updateuser
    uri: /api/v1/users/*
    methods: [PUT]
    upstream:
      type: roundrobin
      timeout:
        connect: 60
        send: 60
        read: 60
      nodes:
        "user-service:50051": 1
      scheme: grpc
    plugins:
      jwt-auth: {}
      grpc-transcode:
        proto_id: "1"
        service: user.UserService
        method: UpdateUser
      cors:
        allow_origins: "*"
        allow_methods: "GET,POST,PUT,DELETE,OPTIONS"
        allow_headers: "*"
